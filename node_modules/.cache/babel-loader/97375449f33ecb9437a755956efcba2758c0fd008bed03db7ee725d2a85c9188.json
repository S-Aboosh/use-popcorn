{"ast":null,"code":"import{useState,useEffect}from\"react\";const KEY=\"870ce811\";export function useMovies(query){const[movies,setMovies]=useState([]);const[error,setError]=useState(\"\");const[isLoading,setIsLoading]=useState(false);useEffect(function(){//   callback?.();\nconst controller=new AbortController();async function fetchMovies(){try{setIsLoading(true);setError(\"\");const res=await fetch(\"http://www.omdbapi.com/?apikey=\".concat(KEY,\"&s=\").concat(query),{signal:controller.signal});if(!res.ok)throw new Error(\"some thing went worng with fetching movies\");const data=await res.json();if(data.response===\"False\")throw new error(\"Movie Not Found\");setMovies(data.Search);setError(\"\");}catch(err){if(err.name!==\"AbortError\"){console.log(err.message);setError(err.message);}}finally{setIsLoading(false);}}if((query===null||query===void 0?void 0:query.length)<3){setMovies([]);setError(\"\");return;}//   handleCloseMovie();\nfetchMovies();return function(){controller.abort();};},[query,error]);return{movies,isLoading,error};}","map":{"version":3,"names":["useState","useEffect","KEY","useMovies","query","movies","setMovies","error","setError","isLoading","setIsLoading","controller","AbortController","fetchMovies","res","fetch","concat","signal","ok","Error","data","json","response","Search","err","name","console","log","message","length","abort"],"sources":["D:/works/react_jonass_course/files/ultimate-react-course-main/07-usepopcorn/final/src/useMovie.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst KEY = `870ce811`;\r\n\r\nexport function useMovies(query) {\r\n  const [movies, setMovies] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  useEffect(\r\n    function () {\r\n      //   callback?.();\r\n      const controller = new AbortController();\r\n      async function fetchMovies() {\r\n        try {\r\n          setIsLoading(true);\r\n          setError(\"\");\r\n          const res = await fetch(\r\n            `http://www.omdbapi.com/?apikey=${KEY}&s=${query}`,\r\n            { signal: controller.signal }\r\n          );\r\n          if (!res.ok)\r\n            throw new Error(\"some thing went worng with fetching movies\");\r\n\r\n          const data = await res.json();\r\n          if (data.response === \"False\") throw new error(\"Movie Not Found\");\r\n          setMovies(data.Search);\r\n          setError(\"\");\r\n        } catch (err) {\r\n          if (err.name !== \"AbortError\") {\r\n            console.log(err.message);\r\n            setError(err.message);\r\n          }\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n\r\n      if (query?.length < 3) {\r\n        setMovies([]);\r\n        setError(\"\");\r\n        return;\r\n      }\r\n      //   handleCloseMovie();\r\n      fetchMovies();\r\n\r\n      return function () {\r\n        controller.abort();\r\n      };\r\n    },\r\n    [query, error]\r\n  );\r\n\r\n  return { movies, isLoading, error };\r\n}\r\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAE3C,KAAM,CAAAC,GAAG,WAAa,CAEtB,MAAO,SAAS,CAAAC,SAASA,CAACC,KAAK,CAAE,CAC/B,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGN,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACO,KAAK,CAAEC,QAAQ,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACS,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CACjDC,SAAS,CACP,UAAY,CACV;AACA,KAAM,CAAAU,UAAU,CAAG,GAAI,CAAAC,eAAe,CAAC,CAAC,CACxC,cAAe,CAAAC,WAAWA,CAAA,CAAG,CAC3B,GAAI,CACFH,YAAY,CAAC,IAAI,CAAC,CAClBF,QAAQ,CAAC,EAAE,CAAC,CACZ,KAAM,CAAAM,GAAG,CAAG,KAAM,CAAAC,KAAK,mCAAAC,MAAA,CACad,GAAG,QAAAc,MAAA,CAAMZ,KAAK,EAChD,CAAEa,MAAM,CAAEN,UAAU,CAACM,MAAO,CAC9B,CAAC,CACD,GAAI,CAACH,GAAG,CAACI,EAAE,CACT,KAAM,IAAI,CAAAC,KAAK,CAAC,4CAA4C,CAAC,CAE/D,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,GAAG,CAACO,IAAI,CAAC,CAAC,CAC7B,GAAID,IAAI,CAACE,QAAQ,GAAK,OAAO,CAAE,KAAM,IAAI,CAAAf,KAAK,CAAC,iBAAiB,CAAC,CACjED,SAAS,CAACc,IAAI,CAACG,MAAM,CAAC,CACtBf,QAAQ,CAAC,EAAE,CAAC,CACd,CAAE,MAAOgB,GAAG,CAAE,CACZ,GAAIA,GAAG,CAACC,IAAI,GAAK,YAAY,CAAE,CAC7BC,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,OAAO,CAAC,CACxBpB,QAAQ,CAACgB,GAAG,CAACI,OAAO,CAAC,CACvB,CACF,CAAC,OAAS,CACRlB,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAEA,GAAI,CAAAN,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEyB,MAAM,EAAG,CAAC,CAAE,CACrBvB,SAAS,CAAC,EAAE,CAAC,CACbE,QAAQ,CAAC,EAAE,CAAC,CACZ,OACF,CACA;AACAK,WAAW,CAAC,CAAC,CAEb,MAAO,WAAY,CACjBF,UAAU,CAACmB,KAAK,CAAC,CAAC,CACpB,CAAC,CACH,CAAC,CACD,CAAC1B,KAAK,CAAEG,KAAK,CACf,CAAC,CAED,MAAO,CAAEF,MAAM,CAAEI,SAAS,CAAEF,KAAM,CAAC,CACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}