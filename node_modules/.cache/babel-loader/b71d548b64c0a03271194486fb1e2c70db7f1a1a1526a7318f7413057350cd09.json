{"ast":null,"code":"import{useEffect,useRef,useState}from\"react\";import StarRating from\"./StarRating\";import{useMovies}from\"./useMovie\";import{useLocalStorageState}from\"./useLocalStorageState\";import{useKey}from\"./useKey\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const average=arr=>arr.reduce((acc,cur,i,arr)=>acc+cur/arr.length,0);const KEY=\"870ce811\";export default function App(){const[query,setQuery]=useState(\"\");const[selectedId,setSelectedId]=useState(\"\");const{movies,isLoading,error}=useMovies(query);const[watched,setWatched]=useLocalStorageState([],\"watched\");function handleSelectMovie(id){setSelectedId(selectedId=>selectedId===id?null:id);}function handleCloseMovie(){setSelectedId(null);}function handleAddWatched(movie){setWatched(watched=>[...watched,movie]);}function handleDeleteWatched(id){setWatched(watched=>watched.filter(watched=>watched.imdbID!==id));}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NavBar,{children:[/*#__PURE__*/_jsx(Search,{query:query,setQuery:setQuery}),/*#__PURE__*/_jsx(NumResults,{movies:movies})]}),/*#__PURE__*/_jsxs(Main,{children:[/*#__PURE__*/_jsxs(Box,{children:[isLoading&&/*#__PURE__*/_jsx(Loader,{}),!isLoading&&!error&&/*#__PURE__*/_jsx(MoviesList,{movies:movies,onSelectMovie:handleSelectMovie}),error&&/*#__PURE__*/_jsx(ErrorMessage,{message:error})]}),/*#__PURE__*/_jsx(Box,{children:selectedId?/*#__PURE__*/_jsx(MovieDetails,{selectedId:selectedId,onCloseMovie:handleCloseMovie,onAddWatched:handleAddWatched,watched:watched}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(WatchedSummery,{watched:watched}),/*#__PURE__*/_jsx(WatchedMoviesList,{watched:watched,onDeleteWatched:handleDeleteWatched})]})})]})]});}function Loader(){return/*#__PURE__*/_jsx(\"p\",{className:\"loader\",children:\" loading... \"});}function ErrorMessage(_ref){let{message}=_ref;return/*#__PURE__*/_jsxs(\"p\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26D4\"}),\" \",message]});}function NavBar(_ref2){let{children}=_ref2;return/*#__PURE__*/_jsxs(\"nav\",{className:\"nav-bar\",children:[/*#__PURE__*/_jsx(Logo,{}),children]});}function Logo(){return/*#__PURE__*/_jsxs(\"div\",{className:\"logo\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",children:\"\\uD83C\\uDF7F\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"usePopcorn\"})]});}function Search(_ref3){let{query,setQuery}=_ref3;const inputEl=useRef(null);useKey(\"Enter\",function(){if(document.activeElement===inputEl.current)return;inputEl.current.focus();setQuery(\"\");});return/*#__PURE__*/_jsx(\"input\",{className:\"search\",type:\"text\",placeholder:\"Search movies...\",value:query,onChange:e=>setQuery(e.target.value),ref:inputEl});}function NumResults(_ref4){let{movies}=_ref4;return/*#__PURE__*/_jsxs(\"p\",{className:\"num-results\",children:[\"Found \",/*#__PURE__*/_jsx(\"strong\",{children:movies===null||movies===void 0?void 0:movies.length}),\" results\"]});}function Main(_ref5){let{children}=_ref5;return/*#__PURE__*/_jsx(\"main\",{className:\"main\",children:children});}function Box(_ref6){let{children}=_ref6;const[isOpen1,setIsOpen1]=useState(true);return/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-toggle\",onClick:()=>setIsOpen1(open=>!open),children:isOpen1?\"–\":\"+\"}),isOpen1&&children]});}function MoviesList(_ref7){let{movies,onSelectMovie}=_ref7;return/*#__PURE__*/_jsx(\"ul\",{className:\"list list-movies\",children:movies===null||movies===void 0?void 0:movies.map(movie=>/*#__PURE__*/_jsx(Movie,{movie:movie,onSelectMovie:onSelectMovie},movie.imdbID))});}function Movie(_ref8){let{movie,onSelectMovie}=_ref8;return/*#__PURE__*/_jsxs(\"li\",{onClick:()=>onSelectMovie(movie.imdbID),children:[/*#__PURE__*/_jsx(\"img\",{src:movie.Poster,alt:\"\".concat(movie.Title,\" poster\")}),/*#__PURE__*/_jsx(\"h3\",{children:movie.Title}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDDD3\"}),/*#__PURE__*/_jsx(\"span\",{children:movie.Year})]})})]},movie.imdbID);}function MovieDetails(_ref9){var _watched$find;let{selectedId,onCloseMovie,onAddWatched,watched}=_ref9;const[movie,setMovie]=useState({});const[isLoading,setIsLoading]=useState(false);const[userRating,setUserRating]=useState(\"\");const countRef=useRef(0);useEffect(function(){if(userRating)countRef.current++;},[userRating]);const isWatched=watched.map(el=>el.imdbID).includes(selectedId);const watchedUserRating=(_watched$find=watched.find(movie=>movie.imdbID===selectedId))===null||_watched$find===void 0?void 0:_watched$find.userRating;const{Title:title,Year:year,Poster:poster,Runtime:runtime,imdbRating,Plot:plot,Released:released,Actors:actors,Director:director,Genre:genre}=movie;// const [avg, setavg] = useState(0);\n/*\n  expirtement of breaking react hook rules\n  if (imdbRating > 8) [isTop, setIsTop] = useState(true);\n  if (imdbRating > 8) return <p>fewrer react hook render</p>\n  */function handleAdd(){const newWatchedMovie={imdbID:selectedId,title,year,poster,imdbRating:Number(imdbRating),runtime:Number(runtime===null||runtime===void 0?void 0:runtime.split(\" \").at(0)),userRating,countRatingDecisions:countRef.current};onAddWatched(newWatchedMovie);/*\n    just proving state is sync\n    setavg(imdbRating);\n    setavg((avg) => (avg + userRating) / 2);\n    */onCloseMovie();}useKey(\"Escape\",onCloseMovie);useEffect(function(){async function getMovieDetails(){setIsLoading(true);const res=await fetch(\"http://www.omdbapi.com/?apikey=\".concat(KEY,\"&i=\").concat(selectedId));const data=await res.json();setMovie(data);setIsLoading(false);}getMovieDetails();},[selectedId]);useEffect(function(){if(!title)return;document.title=\"Movie | \".concat(title);return function(){document.title=\"usePopcorn\";};},[title]);return/*#__PURE__*/_jsx(\"div\",{className:\"details\",children:isLoading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-back\",onClick:onCloseMovie,children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"img\",{src:poster,alt:\"poster of \".concat(movie,\" moive\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"details-overview\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsxs(\"p\",{children:[released,\" \\u2022 \",runtime]}),/*#__PURE__*/_jsx(\"p\",{children:genre}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2B50\\uFE0F\"}),imdbRating,\" IMDb rating\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rating\",children:!isWatched?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StarRating,{maxRating:10,size:24,onSetRating:setUserRating}),userRating>0&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-add\",onClick:handleAdd,children:\"+ Add To List\"})]}):/*#__PURE__*/_jsxs(\"p\",{children:[\"You Rated With This Movie \",watchedUserRating,\" \\u2B50\"]})}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"em\",{children:plot})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Starring \",actors]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Directed By \",director]})]}),selectedId]})});}function WatchedSummery(_ref10){let{watched}=_ref10;const avgImdbRating=average(watched.map(movie=>movie.imdbRating));const avgUserRating=average(watched.map(movie=>movie.userRating));const avgRuntime=average(watched.map(movie=>movie.runtime));return/*#__PURE__*/_jsxs(\"div\",{className:\"summary\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Movies you watched\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"#\\uFE0F\\u20E3\"}),/*#__PURE__*/_jsxs(\"span\",{children:[watched.length,\" movies\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2B50\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:avgImdbRating.toFixed(2)})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDF1F\"}),/*#__PURE__*/_jsx(\"span\",{children:avgUserRating.toFixed(2)})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u23F3\"}),/*#__PURE__*/_jsxs(\"span\",{children:[avgRuntime,\" min\"]})]})]})]});}function WatchedMoviesList(_ref11){let{watched,onDeleteWatched}=_ref11;return/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:watched.map(movie=>/*#__PURE__*/_jsx(WatchedMovie,{movie:movie,onDeleteWatched:onDeleteWatched},movie.imdbID))});}function WatchedMovie(_ref12){let{movie,onDeleteWatched}=_ref12;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:movie.poster,alt:\"\".concat(movie.title,\" poster\")}),/*#__PURE__*/_jsx(\"h3\",{children:movie.title}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2B50\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:movie.imdbRating})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDF1F\"}),/*#__PURE__*/_jsx(\"span\",{children:movie.userRating})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u23F3\"}),/*#__PURE__*/_jsxs(\"span\",{children:[movie.runtime,\" min\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete\",onClick:()=>onDeleteWatched(movie.imdbID),children:\"X\"})]})]});}","map":{"version":3,"names":["useEffect","useRef","useState","StarRating","useMovies","useLocalStorageState","useKey","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","average","arr","reduce","acc","cur","i","length","KEY","App","query","setQuery","selectedId","setSelectedId","movies","isLoading","error","watched","setWatched","handleSelectMovie","id","handleCloseMovie","handleAddWatched","movie","handleDeleteWatched","filter","imdbID","children","NavBar","Search","NumResults","Main","Box","Loader","MoviesList","onSelectMovie","ErrorMessage","message","MovieDetails","onCloseMovie","onAddWatched","WatchedSummery","WatchedMoviesList","onDeleteWatched","className","_ref","_ref2","Logo","role","_ref3","inputEl","document","activeElement","current","focus","type","placeholder","value","onChange","e","target","ref","_ref4","_ref5","_ref6","isOpen1","setIsOpen1","onClick","open","_ref7","map","Movie","_ref8","src","Poster","alt","concat","Title","Year","_ref9","_watched$find","setMovie","setIsLoading","userRating","setUserRating","countRef","isWatched","el","includes","watchedUserRating","find","title","year","poster","Runtime","runtime","imdbRating","Plot","plot","Released","released","Actors","actors","Director","director","Genre","genre","handleAdd","newWatchedMovie","Number","split","at","countRatingDecisions","getMovieDetails","res","fetch","data","json","maxRating","size","onSetRating","_ref10","avgImdbRating","avgUserRating","avgRuntime","toFixed","_ref11","WatchedMovie","_ref12"],"sources":["D:/works/react_jonass_course/files/ultimate-react-course-main/07-usepopcorn/final/src/App.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport StarRating from \"./StarRating\";\nimport { useMovies } from \"./useMovie\";\nimport { useLocalStorageState } from \"./useLocalStorageState\";\nimport { useKey } from \"./useKey\";\n\nconst average = (arr) =>\n  arr.reduce((acc, cur, i, arr) => acc + cur / arr.length, 0);\n\nconst KEY = `870ce811`;\n\nexport default function App() {\n  const [query, setQuery] = useState(\"\");\n  const [selectedId, setSelectedId] = useState(\"\");\n  const { movies, isLoading, error } = useMovies(query);\n  const [watched, setWatched] = useLocalStorageState([], \"watched\");\n\n  function handleSelectMovie(id) {\n    setSelectedId((selectedId) => (selectedId === id ? null : id));\n  }\n\n  function handleCloseMovie() {\n    setSelectedId(null);\n  }\n\n  function handleAddWatched(movie) {\n    setWatched((watched) => [...watched, movie]);\n  }\n\n  function handleDeleteWatched(id) {\n    setWatched((watched) => watched.filter((watched) => watched.imdbID !== id));\n  }\n\n  return (\n    <>\n      <NavBar>\n        <Search query={query} setQuery={setQuery} />\n        <NumResults movies={movies} />\n      </NavBar>\n      <Main>\n        <Box>\n          {isLoading && <Loader />}\n          {!isLoading && !error && (\n            <MoviesList movies={movies} onSelectMovie={handleSelectMovie} />\n          )}\n          {error && <ErrorMessage message={error} />}\n        </Box>\n        <Box>\n          {selectedId ? (\n            <MovieDetails\n              selectedId={selectedId}\n              onCloseMovie={handleCloseMovie}\n              onAddWatched={handleAddWatched}\n              watched={watched}\n            />\n          ) : (\n            <>\n              <WatchedSummery watched={watched} />\n              <WatchedMoviesList\n                watched={watched}\n                onDeleteWatched={handleDeleteWatched}\n              />\n            </>\n          )}\n        </Box>\n      </Main>\n    </>\n  );\n}\n\nfunction Loader() {\n  return <p className=\"loader\"> loading... </p>;\n}\n\nfunction ErrorMessage({ message }) {\n  return (\n    <p className=\"error\">\n      <span>⛔</span> {message}\n    </p>\n  );\n}\n\nfunction NavBar({ children }) {\n  return (\n    <nav className=\"nav-bar\">\n      <Logo />\n      {children}\n    </nav>\n  );\n}\n\nfunction Logo() {\n  return (\n    <div className=\"logo\">\n      <span role=\"img\">🍿</span>\n      <h1>usePopcorn</h1>\n    </div>\n  );\n}\n\nfunction Search({ query, setQuery }) {\n  const inputEl = useRef(null);\n\n  useKey(\"Enter\", function () {\n    if (document.activeElement === inputEl.current) return;\n    inputEl.current.focus();\n    setQuery(\"\");\n  });\n\n  return (\n    <input\n      className=\"search\"\n      type=\"text\"\n      placeholder=\"Search movies...\"\n      value={query}\n      onChange={(e) => setQuery(e.target.value)}\n      ref={inputEl}\n    />\n  );\n}\n\nfunction NumResults({ movies }) {\n  return (\n    <p className=\"num-results\">\n      Found <strong>{movies?.length}</strong> results\n    </p>\n  );\n}\n\nfunction Main({ children }) {\n  return <main className=\"main\">{children}</main>;\n}\n\nfunction Box({ children }) {\n  const [isOpen1, setIsOpen1] = useState(true);\n  return (\n    <div className=\"box\">\n      <button\n        className=\"btn-toggle\"\n        onClick={() => setIsOpen1((open) => !open)}\n      >\n        {isOpen1 ? \"–\" : \"+\"}\n      </button>\n      {isOpen1 && children}\n    </div>\n  );\n}\n\nfunction MoviesList({ movies, onSelectMovie }) {\n  return (\n    <ul className=\"list list-movies\">\n      {movies?.map((movie) => (\n        <Movie movie={movie} key={movie.imdbID} onSelectMovie={onSelectMovie} />\n      ))}\n    </ul>\n  );\n}\n\nfunction Movie({ movie, onSelectMovie }) {\n  return (\n    <li key={movie.imdbID} onClick={() => onSelectMovie(movie.imdbID)}>\n      <img src={movie.Poster} alt={`${movie.Title} poster`} />\n      <h3>{movie.Title}</h3>\n      <div>\n        <p>\n          <span>🗓</span>\n          <span>{movie.Year}</span>\n        </p>\n      </div>\n    </li>\n  );\n}\n\nfunction MovieDetails({ selectedId, onCloseMovie, onAddWatched, watched }) {\n  const [movie, setMovie] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [userRating, setUserRating] = useState(\"\");\n\n  const countRef = useRef(0);\n\n  useEffect(\n    function () {\n      if (userRating) countRef.current++;\n    },\n    [userRating]\n  );\n\n  const isWatched = watched.map((el) => el.imdbID).includes(selectedId);\n  const watchedUserRating = watched.find(\n    (movie) => movie.imdbID === selectedId\n  )?.userRating;\n\n  const {\n    Title: title,\n    Year: year,\n    Poster: poster,\n    Runtime: runtime,\n    imdbRating,\n    Plot: plot,\n    Released: released,\n    Actors: actors,\n    Director: director,\n    Genre: genre,\n  } = movie;\n\n  // const [avg, setavg] = useState(0);\n\n  /*\n  expirtement of breaking react hook rules\n  if (imdbRating > 8) [isTop, setIsTop] = useState(true);\n  if (imdbRating > 8) return <p>fewrer react hook render</p>\n  */\n  function handleAdd() {\n    const newWatchedMovie = {\n      imdbID: selectedId,\n      title,\n      year,\n      poster,\n      imdbRating: Number(imdbRating),\n      runtime: Number(runtime?.split(\" \").at(0)),\n      userRating,\n      countRatingDecisions: countRef.current,\n    };\n\n    onAddWatched(newWatchedMovie);\n    /*\n    just proving state is sync\n    setavg(imdbRating);\n    setavg((avg) => (avg + userRating) / 2);\n    */\n    onCloseMovie();\n  }\n\n  useKey(\"Escape\", onCloseMovie);\n\n  useEffect(\n    function () {\n      async function getMovieDetails() {\n        setIsLoading(true);\n        const res = await fetch(\n          `http://www.omdbapi.com/?apikey=${KEY}&i=${selectedId}`\n        );\n        const data = await res.json();\n        setMovie(data);\n        setIsLoading(false);\n      }\n      getMovieDetails();\n    },\n    [selectedId]\n  );\n\n  useEffect(\n    function () {\n      if (!title) return;\n      document.title = `Movie | ${title}`;\n\n      return function () {\n        document.title = \"usePopcorn\";\n      };\n    },\n    [title]\n  );\n\n  return (\n    <div className=\"details\">\n      {isLoading ? (\n        <Loader />\n      ) : (\n        <>\n          {\" \"}\n          <header>\n            <button className=\"btn-back\" onClick={onCloseMovie}>\n              &larr;\n            </button>\n            <img src={poster} alt={`poster of ${movie} moive`} />\n            <div className=\"details-overview\">\n              <h2>{title}</h2>\n              <p>\n                {released} &bull; {runtime}\n              </p>\n              <p>{genre}</p>\n              <p>\n                <span>⭐️</span>\n                {imdbRating} IMDb rating\n              </p>\n            </div>\n          </header>\n          <div className=\"rating\">\n            {!isWatched ? (\n              <>\n                <StarRating\n                  maxRating={10}\n                  size={24}\n                  onSetRating={setUserRating}\n                />\n                {userRating > 0 && (\n                  <button className=\"btn-add\" onClick={handleAdd}>\n                    + Add To List\n                  </button>\n                )}\n              </>\n            ) : (\n              <p>You Rated With This Movie {watchedUserRating} ⭐</p>\n            )}\n          </div>\n          <section>\n            <p>\n              <em>{plot}</em>\n            </p>\n            <p>Starring {actors}</p>\n            <p>Directed By {director}</p>\n          </section>\n          {selectedId}\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction WatchedSummery({ watched }) {\n  const avgImdbRating = average(watched.map((movie) => movie.imdbRating));\n  const avgUserRating = average(watched.map((movie) => movie.userRating));\n  const avgRuntime = average(watched.map((movie) => movie.runtime));\n  return (\n    <div className=\"summary\">\n      <h2>Movies you watched</h2>\n      <div>\n        <p>\n          <span>#️⃣</span>\n          <span>{watched.length} movies</span>\n        </p>\n        <p>\n          <span>⭐️</span>\n          <span>{avgImdbRating.toFixed(2)}</span>\n        </p>\n        <p>\n          <span>🌟</span>\n          <span>{avgUserRating.toFixed(2)}</span>\n        </p>\n        <p>\n          <span>⏳</span>\n          <span>{avgRuntime} min</span>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction WatchedMoviesList({ watched, onDeleteWatched }) {\n  return (\n    <ul className=\"list\">\n      {watched.map((movie) => (\n        <WatchedMovie\n          movie={movie}\n          key={movie.imdbID}\n          onDeleteWatched={onDeleteWatched}\n        />\n      ))}\n    </ul>\n  );\n}\n\nfunction WatchedMovie({ movie, onDeleteWatched }) {\n  return (\n    <li>\n      <img src={movie.poster} alt={`${movie.title} poster`} />\n      <h3>{movie.title}</h3>\n      <div>\n        <p>\n          <span>⭐️</span>\n          <span>{movie.imdbRating}</span>\n        </p>\n        <p>\n          <span>🌟</span>\n          <span>{movie.userRating}</span>\n        </p>\n        <p>\n          <span>⏳</span>\n          <span>{movie.runtime} min</span>\n        </p>\n        <button\n          className=\"btn-delete\"\n          onClick={() => onDeleteWatched(movie.imdbID)}\n        >\n          X\n        </button>\n      </div>\n    </li>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}